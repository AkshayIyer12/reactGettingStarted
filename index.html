<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="lib/react.development.js"></script>
    <script src="lib/react-dom.development.js"></script>
    <script src="lib/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      // const formatName = ({firstName, lastName}) => `${firstName} ${lastName}`
      // const user = {
      //   firstName: 'Akshay',
      //   lastName: 'Iyer',
      //   avatarUrl: 'https://i2.wp.com/greetyhunt.com/wp-content/uploads/2018/02/Avatar-Meme-05.jpg?fit=600%2C672'
      // }
      // const getGreeting = user => {
      //   if (user) {
      //     return <h1>Hello, {formatName(user)}!</h1>;
      //   }
      //   return <h1>Hello, Stranger.</h1>;
      // }
      // const element = (<div tabIndex="0"></div>)
      // const element = (<img src={user.avatarUrl}></img>)
      // const tick = () => {
      //   const element = (
      //     <div>
      //       <h1>Hello, World</h1>
      //       <h2>It is {new Date().toLocaleTimeString()}</h2>
      //     </div>
      //   )
      //   ReactDOM.render(element, document.getElementById('root'))
      // }
      // setInterval(tick, 1000)
      // class Welcome extends React.Component {
      //   render() {
      //     return <h1>Hello, {this.props.name}</h1>
      //   }
      // }
      // const Welcome = props => <h1>Hello, {props.name}</h1>
      // const App = () => {
      //   return (
      //     <div>
      //       <Welcome name="Sara" />
      //       <Welcome name="Cahal" />
      //       <Welcome name="Edite" />
      //     </div>
      //   )
      // }
      // ReactDOM.render(<App />, document.getElementById('root'))
      // class Clock extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {date: new Date()}
      //   }

      //   componentDidMount() {
      //     this.timerID = setInterval(() => this.tick(), 1000)
      //   }

      //   componentWillUnMount() {
      //     clearInterval(this.timerID)
      //   }

      //   tick() {
      //     this.setState({
      //       date: new Date()
      //     })
      //   }
      //   render() {
      //     return (
      //       <div>
      //         <h1>Hello, world!</h1>
      //         <h2>It is {this.state.date.toLocaleTimeString()}</h2>
      //       </div>
      //     )
      //   }
      // }
      // const App = () => {
      //   return (
      //     <div>
      //       <Clock />
      //       <Clock />
      //       <Clock />
      //     </div>
      //   )
      // }
      // class Toggle extends React.Component {
      //   constructor (props) {
      //     super(props)
      //     this.state = {isToggleOn: true}
      //     // this.handleClick = this.handleClick.bind(this)
      //   }
      //   handleClick() {
      //     this.setState(prevState => {
      //       return {
      //         isToggleOn: !prevState.isToggleOn
      //       }
      //     })
      //   }
      //   render() {
      //     return (
      //       <button onClick={(e) => this.handleClick(e)}>
      //         {this.state.isToggleOn ? 'ON' : 'OFF'}
      //       </button>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <Toggle/>,
      //   document.getElementById('root')
      // )
      // function UserGreeting(props) {
      //   return <h1>Welcome back!</h1>
      // }
      // function  GuestGreeting(props) {
      //   return <h1>Please sign up.</h1>
      // }
      // function Greeting(props) {
      //   const isLoggedIn = props.isLoggedIn
      //   if (isLoggedIn) {
      //     return <UserGreeting />
      //   }
      //   return <GuestGreeting />
      // }
      // ReactDOM.render(
      //   <Greeting isLoggedIn={true} />,
      //   document.getElementById('root')
      // )
      // function LoginButton(props) {
      //   return (
      //     <button onClick={props.onClick}>
      //       Login
      //     </button>
      //   )
      // }
      // function LogoutButton(props) {
      //   return (
      //     <button onClick={props.onClick}>
      //       Logout
      //     </button>
      //   )
      // }
      // class LoginControl extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {isLoggedIn: false}
      //   }
      //   handleLoginClick = () => {
      //     this.setState({isLoggedIn: true})
      //   }
      //   handleLogoutClick = () => {
      //     this.setState({isLoggedIn: false})
      //   }
      //   render = () => {
      //     const isLoggedIn = this.state.isLoggedIn
      //     let button = null
      //     if (isLoggedIn) {
      //       button = <LogoutButton onClick={this.handleLogoutClick} />
      //     } else {
      //       button = <LoginButton onClick={this.handleLoginClick} />
      //     }
      //     return (
      //       <div>
      //         <Greeting isLoggedIn={isLoggedIn} />
      //         {button}
      //       </div>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <LoginControl />,
      //   document.getElementById('root')
      // )
      // function Mailbox(props) {
      //   const unreadMessages = props.unreadMessages
      //   return (
      //     <div>
      //       <h1>Hello</h1>
      //       {unreadMessages.length > 0 && 
      //       <h2>
      //         You have {unreadMessages.length} unread messages.
      //       </h2>
      //       }
      //     </div>
      //   )
      // }
      // const messages = ['React', 'Re: React', 'Re:Re: React']
      // ReactDOM.render(
      //   <Mailbox unreadMessages={messages} />,
      //   document.getElementById('root')
      // )
      // function WarningBanner(props) {
      //   if (!props.warn) {
      //     return null
      //   }
      //   return (
      //     <div className="warning">
      //       Warning!
      //     </div>
      //   )
      // }
      // class Page extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {showWarning: true}
      //   }
      //   handleToggleClick = () => {
      //     this.setState(prevState => ({
      //       showWarning: !prevState.showWarning
      //     }))
      //   }
      //   render = () => {
      //     return (
      //       <div>
      //         <WarningBanner warn={this.state.showWarning} />
      //         <button onClick={this.handleToggleClick}>
      //           {this.state.showWarning ? 'Hide' : 'Show'}
      //         </button>
      //       </div>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <Page />,
      //   document.getElementById('root')
      // )
      // function NumberList(props) {
      //   const numbers = props.numbers
      //   const listItems = numbers.map(num => <li>{num}</li>)
      //   return (<ul>{listItems}</ul>)
      // }
      // const numbers = [1, 2, 3, 4, 5]
      // ReactDOM.render(
      //   <NumberList numbers={numbers} />,
      //   document.getElementById('root')
      // )
      // function NumberList(props) {
      //   const numbers = props.numbers
      //   const listItems = numbers.map(number =>
      //     <li key={number.toString()}>
      //       {number}
      //     </li>
      //   ) 
      //   return (
      //     <ul>{listItems}</ul>
      //   )
      // }
      // const numbers = [1, 2, 3, 4, 5]
      // ReactDOM.render(
      //   <NumberList numbers={numbers} />,
      //   document.getElementById('root')
      // )
      // function ListItem(props) {
      //   return <li>{props.value}</li>
      // }
      // function NumberList(props) {
      //   const numbers = props.numbers
      //   const listItems = numbers.map(number => (<ListItem key={number.toString()} value={number} />))
      //   return (<ul>{listItems}</ul>)
      // }
      // const numbers = [1, 2, 3, 4, 5]
      // ReactDOM.render(
      //   <NumberList numbers={numbers} />,
      //   document.getElementById('root')
      // )
      // function Blog(props) {
      //   const sidebar = (
      //     <ul>
      //       {props.posts.map(post => (
      //         <li key={post.id}>{post.title}</li>
      //       ))}
      //     </ul>
      //   )
      //   const content = props.posts.map(post => (
      //     <div key={post.id}>
      //       <h3>{post.title}</h3>
      //       <p>{post.content}</p>
      //     </div>
      //   ))
      //   return (
      //     <div>
      //       {sidebar}
      //       <hr />
      //       {content}
      //     </div>
      //   )
      // }
      // const posts = [[1, 'Hello World', 'Welcome to learning react'], 
      // [2, 'Installation', 'You can install react from npm']].reduce((accum, v) => {
      //   let obj = {}
      //   obj.id = v[0]
      //   obj.title = v[1]
      //   obj.content = v[2]
      //   accum.push(obj)
      //   return accum
      // }, [])
      // ReactDOM.render(
      //   <Blog posts={posts} />,
      //   document.getElementById('root')
      // )
      // class NameForm extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {value: ''}
      //   }
      //   handleChange = e => {
      //     this.setState({value: e.target.value})
      //   }
      //   handleSubmit = e => {
      //     console.log('A name was submitted: ' + this.state.value)
      //     e.preventDefault()
      //   }
      //   render = () => {
      //     return (
      //       <form onSubmit={this.handleSubmit}>
      //         <label>
      //           Name:
      //           <input type="text" value={this.state.value} onChange={this.handleChange} />
      //         </label>
      //         <input type="submit" value="Submit" />
      //       </form>
      //     )
      //   } 
      // }
      // ReactDOM.render(
      //   <NameForm />,
      //   document.getElementById('root')
      // )
      // class FlavorForm extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {value: 'coconut'}
      //   }
      //   handleChange = event => {
      //     this.setState({value: event.target.value})
      //   }
      //   handleSubmit = event => {
      //     console.log(this.state.value)
      //     event.preventDefault()
      //   }
      //   render = () => {
      //     return (
      //       <form onSubmit={this.handleSubmit}>
      //         <label>
      //           Pick your favourite La Croix flavor:
      //           <select value={this.state.value} onChange={this.handleChange}>
      //             <option value="grapefruit">Grapefruit</option>
      //             <option value="lime">Lime</option>
      //             <option value="coconut">Coconut</option>
      //             <option value="mango">Mango</option>
      //           </select>
      //         </label>
      //         <input type="submit" value="Submit" />
      //       </form>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <FlavorForm />,
      //   document.getElementById('root')
      // )
      // class Reservation extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {
      //       isGoing: true,
      //       numberOfGuests: 2
      //     }
      //   }
      //   handleInputChange = event => {
      //     const target = event.target
      //     const value = target.type === 'checkbox' ? target.checked : target.value
      //     const name = target.name
      //     this.setState({
      //       [name]: value
      //     })
      //     console.log(this.state)
      //   }
      //   render = () => {
      //     return (
      //       <form>
      //         <label>
      //         Is going: 
      //           <input name="isGoing" type="checkbox" checked={this.state.isGoing} 
      //           onChange={this.handleInputChange} />
      //         </label>
      //         <br />
      //         <label>
      //           Number of guests:
      //           <input name="numberOfGuests" type="number" value={this.state.numberOfGuests} 
      //           onChange={this.handleInputChange} />
      //         </label>
      //       </form>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <Reservation />,
      //   document.getElementById('root')
      // )
      // function BoilingVerdict(props) {
      //   if (props.celsius >= 100) {
      //     return <p>The water would boil.</p>
      //   }
      //   return <p>The water would not boil.</p>
      // }
      // class Calculator extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {temperature: ''}
      //   }
      //   handleChange = e => {
      //     console.log('Triggered')
      //     this.setState({temperature: e.target.value})
      //   }
      //   render = () => {
      //     const temperature = this.state.temperature
      //     return (
      //       <fieldset>
      //         <legend>Enter temperature in Celsius:</legend>
      //         <input value={temperature} onChange={this.handleChange} />
      //         <BoilingVerdict celsius={parseFloat(temperature)} />
      //       </fieldset>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <Calculator />,
      //   document.getElementById('root')
      // )
      // const scaleNames = {
      //   c: 'Celsius',
      //   f: 'Fahrenheit'
      // }
      // const toCelsius = fahrenheit => (fahrenheit - 32) * 5 / 9
      // const toFahrenheit = celsius => (celsius * 9) / 5 + 32
      // const tryConvert = (temperature, convert) => {
      //   const input = parseFloat(temperature)
      //   if (Number.isNaN(input)) return ''
      //   const output = convert(input)
      //   const rounded = Math.round(output * 1000) / 1000
      //   return rounded.toString()
      // }
      // class TemperatureInput extends React.Component {
      //   constructor(props) {
      //     super(props)
      //   }
      //   handleChange = e => {
      //     this.props.onTemperatureChange(e.target.value)
      //   }
      //   render = () => {
      //     const temperature = this.props.temperature
      //     const scale = this.props.scale
      //     return (
      //       <fieldset>
      //         <legend>Enter temperature in {scaleNames[scale]}:</legend>
      //         <input value={temperature} onChange={this.handleChange} type="number"/>
      //       </fieldset>
      //     )
      //   }
      // }
      // class Calculator extends React.Component {
      //   constructor (props) {
      //     super(props)
      //     this.state= {temperature: '', scale: 'c'}
      //   }
      //   handleCelsiusChange = temperature => {
      //     this.setState({scale: 'c', temperature})
      //   }
      //   handleFahrenheitChange = temperature => {
      //     this.setState({scale: 'f', temperature})
      //   }
      //   render = () => {
      //     const scale = this.state.scale
      //     const temperature = this.state.temperature
      //     console.log(temperature)
      //     const celsius = scale === 'f' ? tryConvert(temperature, toCelsius) : temperature
      //     const fahrenheit = scale === 'c' ? tryConvert(temperature, toFahrenheit) : temperature
      //     return (
      //       <div>
      //         <TemperatureInput scale="c" temperature={celsius} onTemperatureChange={this.handleCelsiusChange} />
      //         <TemperatureInput scale="f" temperature={fahrenheit} onTemperatureChange={this.handleFahrenheitChange} />
      //         <BoilingVerdict celsius={parseFloat(celsius)} />
      //       </div>
      //     )
      //   }
      // }
      // ReactDOM.render(
      //   <Calculator />,
      //   document.getElementById('root')
      // )
      // const FancyBorder = props => {
      //   return (
      //     <div className={'FancyBorder FancyBorder-' + props.color}>
      //       {props.children}
      //     </div>
      //   )
      // }
      // const Dialog = props => {
      //   return (
      //     <FancyBorder color="blue">
      //       <h1 className="Dialog-title">{props.title}</h1>
      //       <p className="Dialog-message">{props.message}</p>
      //       {props.children}
      //     </FancyBorder>
      //   )
      // }
      // class SignUpDialog extends React.Component {
      //   constructor(props) {
      //     super(props)
      //     this.state = {login: ''}
      //   }
      //   render = () => {
      //     return (
      //       <Dialog title="Mars Exploration Program" message="How should we refer to you?">
      //         <input value={this.state.login} onChange={this.handleChange} />
      //         <button onClick={this.handleSignUp}>Sign Me Up!</button>
      //       </Dialog>
      //     )
      //   }
      //   handleChange = e => this.setState({login: e.target.value})
      //   handleSignUp = () => console.log(`Welcome aboard, ${this.state.login}!`)
      // }
      // ReactDOM.render(
      //   <SignUpDialog />,
      //   document.getElementById('root')
      // )
 const jsonData = [ {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'}, {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'}, {category: 'Sporting Goods', price: '$29.99', stocked: false, name:
'Basketball'}, {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'}, {category: 'Electronics', price:
'$399.99', stocked: false, name: 'iPhone 5'}, {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'}
]
      
      class FilterableProductTable extends React.Component {
        constructor(props) {
          super(props)
          this.state = {
            filterText: '',
            inStockOnly: false
          }
        }
        handleFilterTextChange = filterText => {
          this.setState({
            filterText: filterText
          })
        }
        handleInStockChange = inStockOnly => {
          this.setState({
            inStockOnly: inStockOnly
          })
        }
        render = () => {
          return (
            <div>
              <SearchBar 
                filterText={this.state.filterText} 
                inStockOnly={this.state.inStockOnly}
                onFilterTextChange={this.handleFilterTextChange}
                onInStockChange={this.handleInStockChange}
              />
              <ProductTable 
                products={this.props.products} 
                filterText={this.state.filterText} 
                inStockOnly={this.state.inStockOnly} 
              />
            </div>
          )
        }
      }
      class SearchBar extends React.Component {
        constructor(props) {
          super(props)
        }
        handleFilterTextChange = e => {
          this.props.onFilterTextChange(e.target.value)
        }
        handleInStockChange = e => {
          this.props.onInStockChange(e.target.checked)
        }
        render = () => {
          const {filterText, inStockOnly} = this.props
          return (
            <form>
              <input type="text" placeholder="Search..." value={filterText} onChange={this.handleFilterTextChange}/><br />
              <p>
                <input type="checkbox" checked={inStockOnly} onChange={this.handleInStockChange}/>
                {' '}
                Only show products in stock
              </p>
            </form>
          )
        }
      }
      
      const filterProducts = product => inStockOnly => filterText => {
        return (product.name.indexOf(filterText) === -1 
        || (inStockOnly && !product.stocked)) ? null : product
      }

      const reducer = accum => product => { 
        let minArr = [] 
        if (product.category !== accum.lastCategory) { 
          minArr.push(<ProductCategoryRow category={product.category} key={product.category} />)
        }
        accum.lastCategory = product.category 
        minArr.push(<ProductRow product={product} key={product.name} />) 
        accum.majArr.push(minArr) 
        return accum 
      }

      class ProductTable extends React.Component {
        render = () => {
          const {filterText, inStockOnly, products} = this.props          
          let rowObj = products
          .filter(product => filterProducts(product)(inStockOnly)(filterText))
          .reduce((accum, product) => reducer(accum)(product),
          { 
            lastCategory: null, 
            majArr: [] 
          })
          let newRow = [].concat(...rowObj.majArr)
          return (
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Price</th>
                </tr>
              </thead>
              <tbody>{newRow}</tbody>
            </table>
          )
        }
      }
      class ProductCategoryRow extends React.Component {
        render = () => {
          return (
            <tr>
              <th colSpan="2">{this.props.category}</th>
            </tr>
          )
        }
      }
      class ProductRow extends React.Component {
        render = () => {
          const { product } = this.props
          const name = product.stocked ? product.name : <span style={{color: 'red'}}>{product.name}</span>
          return (
            <tr>
              <td>{name}</td>
              <td>{product.price}</td>
            </tr>
          )
        }
      }
      ReactDOM.render(
        <FilterableProductTable products={jsonData} />,
        document.getElementById('root')
      )
      
    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      To set up a production-ready React build environment, follow these instructions:
      * https://reactjs.org/docs/add-react-to-a-new-app.html
      * https://reactjs.org/docs/add-react-to-an-existing-app.html

      You can also use React without JSX, in which case you can remove Babel:
      * https://reactjs.org/docs/react-without-jsx.html
      * https://reactjs.org/docs/cdn-links.html
    -->
  </body>
</html>